<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: AssetKeepr</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: AssetKeepr</h1>

    




<section>

<header>
    
        <h2><span class="attribs"><span class="type-signature"></span></span>AssetKeepr<span class="signature">()</span><span class="type-signature"></span></h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    

    
    <h4 class="name" id="AssetKeepr"><span class="type-signature"></span>new AssetKeepr<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Note it's &quot;keepr&quot;, not &quot;keeper&quot;, to avoid name confliction.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="xutils_assetkeepr.js.html">xutils/assetkeepr.js</a>, <a href="xutils_assetkeepr.js.html#line20">line 20</a>
    </li></ul></dd>
    

    

    

    
</dl>




















    
    </div>

    

    

    

    

    

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id=".assets"><span class="type-signature">(static, constant) </span>assets<span class="type-signature"></span></h4>




<div class="description">
    <p>Assets buffer for global resource management</p>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="xutils_assetkeepr.js.html">xutils/assetkeepr.js</a>, <a href="xutils_assetkeepr.js.html#line15">line 15</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id=".defaultex"><span class="type-signature">(static) </span>defaultex<span class="signature">()</span><span class="type-signature"></span></h4>
    

    















<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="xutils_assetkeepr.js.html">xutils/assetkeepr.js</a>, <a href="xutils_assetkeepr.js.html#line36">line 36</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id=".loadCanvtex"><span class="type-signature">(static) </span>loadCanvtex<span class="signature">(cmpCanv, stamp, onUpdate)</span><span class="type-signature"> &rarr; {xv.XCompnent.Canvas}</span></h4>
    

    



<div class="description">
    <p>Initialize a Canvas component with a THREE.CanvasTexture from canvas, which
is not initialized when return. The component will be updated when ready</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>cmpCanv</code></td>
            

            <td class="type">
            
                
<span class="param-type">xv.XCompnent.Canvas</span>


            
            </td>

            

            

            <td class="description last"><p>Canvas component</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>stamp</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"><p>optional, if stamp is less than x.lastUpdate, ignore
the request; if undefined, always update. So set this carefully for performance
optimization - updating canvas is a heavy work load.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>onUpdate</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p>optional, callback when html canvas texture updated.
parameter: canvas {HTML.Canvas}, texture {THREE.CanvasTexture}</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="xutils_assetkeepr.js.html">xutils/assetkeepr.js</a>, <a href="xutils_assetkeepr.js.html#line146">line 146</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>the Canvas component referencing object:
tex: THREE.CanvasTexture when html canvas is initialized. But before this is undefined.
canvas: HTML canvas when html canvas is initialized. But before this is undefined.
ctx2d: HTML canvas 2d context when html canvas is initialized. But before this is undefined.</p>
<h2>DESIGN-MEMO</h2>
<ol>
<li>This function maintance dirty with tick flag. Referenced cavase won't
been updated if the component's stamp less than the asset's stamp</li>
<li>Texture canvas are sharable.</li>
</ol>
<h2>Reference</h2>
<p>https://stackoverflow.com/questions/3768565/drawing-an-svg-file-on-a-html5-canvas
https://jsfiddle.net/Wijmo5/h2L3gw88/
https://bl.ocks.org/mbostock/1276463
threejs example: https://threejs.org/examples/?q=canvas#webgl_materials_texture_canvas
example source: https://github.com/mrdoob/three.js/blob/master/examples/webgl_materials_texture_canvas.html
threejs doc CanvasTexture: https://threejs.org/docs/index.html#api/en/textures/CanvasTexture</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">xv.XCompnent.Canvas</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id=".loadGltf"><span class="type-signature">(static) </span>loadGltf<span class="signature">(scene, url, onload)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>load gltf module
see
https://threejs.org/docs/#examples/en/loaders/GLTFLoader
https://threejsfundamentals.org/threejs/lessons/threejs-load-gltf.html</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>scene</code></td>
            

            <td class="type">
            
                
<span class="param-type">THREE.Scene</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>url</code></td>
            

            <td class="type">
            
                
<span class="param-type">stirng</span>


            
            </td>

            

            

            <td class="description last"><p>A string containing the path/URL of the .gltf or .glb file.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>onload</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p>callback on assets loaded
see <a href='https://threejs.org/docs/index.html#examples/en/loaders/GLTFLoader'>
THREE.GltfLoader</a></p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="xutils_assetkeepr.js.html">xutils/assetkeepr.js</a>, <a href="xutils_assetkeepr.js.html#line58">line 58</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id=".loadGltfNodes"><span class="type-signature">(static) </span>loadGltfNodes<span class="signature">()</span><span class="type-signature"></span></h4>
    

    















<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="xutils_assetkeepr.js.html">xutils/assetkeepr.js</a>, <a href="xutils_assetkeepr.js.html#line98">line 98</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id=".loadSVG"><span class="type-signature">(static) </span>loadSVG<span class="signature">()</span><span class="type-signature"></span></h4>
    

    















<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="xutils_assetkeepr.js.html">xutils/assetkeepr.js</a>, <a href="xutils_assetkeepr.js.html#line202">line 202</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">x-visual API</a></h2><h3>Classes</h3><ul><li><a href="AbsCluster.html">AbsCluster</a></li><li><a href="abstract.html">abstract</a></li><li><a href="AssetKeepr.html">AssetKeepr</a></li><li><a href="Layers.html">Layers</a></li><li><a href="module.exports.html">exports</a></li><li><a href="module.exports_module.exports.html">exports</a></li><li><a href="MorphingAnim.html">MorphingAnim</a></li><li><a href="OSM3.html">OSM3</a></li><li><a href="OsmUtils.html">OsmUtils</a></li><li><a href="Request.html">Request</a></li><li><a href="Thrender.html">Thrender</a></li><li><a href="TilesKeeper.html">TilesKeeper</a></li><li><a href="vec3.html">vec3</a></li><li><a href="Vec3_.html">Vec3</a></li><li><a href="XError.html">XError</a></li><li><a href="xglsl.html">xglsl</a></li><li><a href="xmath.html">xmath</a></li><li><a href="xutils.html">xutils</a></li></ul><h3>Namespaces</h3><ul><li><a href="map3.html">map3</a></li><li><a href="xv.html">xv</a></li><li><a href="xv.anim.html">anim</a></li><li><a href="xv.chart.html">chart</a></li><li><a href="xv.ecs.comp.anim.html">anim</a></li><li><a href="xv.ecs.comp.ext.effect.html">effect</a></li><li><a href="xv.ecs.comp.obj.html">obj</a></li><li><a href="xv.ecs.comp.view.html">view</a></li><li><a href="xv.ecs.comp.visual.html">visual</a></li><li><a href="xv.ecs.sys.html">sys</a></li><li><a href="xv.ecs.sys.ext.html">ext</a></li><li><a href="xv.ecs.sys.tween.html">tween</a></li><li><a href="xv.map3.html">map3</a></li><li><a href="xv.map3.tiles.html">tiles</a></li><li><a href="xv.map3.utils.html">utils</a></li><li><a href="xv.particle.html">particle</a></li><li><a href="xv.xapp.html">xapp</a></li><li><a href="xv.xmath.html">xmath</a></li><li><a href="xv.xmath.layer.html">layer</a></li><li><a href="xv.xutils.html">xutils</a></li></ul><h3>Global</h3><ul><li><a href="global.html#AssetType">AssetType</a></li><li><a href="global.html#Canvas">Canvas</a></li><li><a href="global.html#CmpTween">CmpTween</a></li><li><a href="global.html#CmpTweens">CmpTweens</a></li><li><a href="global.html#createEntityDefs">createEntityDefs</a></li><li><a href="global.html#mat4">mat4</a></li><li><a href="global.html#pushTriggerings">pushTriggerings</a></li><li><a href="global.html#R">R</a></li><li><a href="global.html#registerComponents">registerComponents</a></li><li><a href="global.html#ShaderFlag">ShaderFlag</a></li><li><a href="global.html#startTriggered">startTriggered</a></li><li><a href="global.html#TweenScript">TweenScript</a></li><li><a href="global.html#update">update</a></li><li><a href="global.html#UserTween">UserTween</a></li><li><a href="global.html#validate">validate</a></li><li><a href="global.html#Visual">Visual</a></li><li><a href="global.html#x">x</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Wed Mar 11 2020 14:49:37 GMT+0800 (Hong Kong Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>