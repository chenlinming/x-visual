<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>XTest SVG -&gt; Obj3</title>
	<script type='text/javascript' src='../../../node_modules/three/build/three.min.js'></script>
    <script type='text/javascript' src='../../../dist/jquery-3.4.1.js'></script>
	<script type='text/javascript' src='../../../dist/xv-0.3.0.min.js'></script>
</head>
<body>
  <canvas id='canv'></canvas>
  <script>
	"use strict";

	const xworld = new xv.XWorld(document.getElementById('canv'),
					  window, {canvasize: [600, 400]});

    // var json = '../data/way-2.geojson';
	// var origin = [11578238.61,3604584.74];

    // var json = '../data/way-1.geojson';
	// var origin = [11579034.565894317, 3578695.67265513];

    var json = '../assets/earth/cd-express-way.geojson';
	var origin = [11584597., 3576803.];

    $.getJSON( json, function(json) {
		xworld.addEntities( {
			id: 'way1',
			Obj3: { geom: xv.XComponent.Obj3Type.MapXZRoad,
					uniforms: {opacity: 1.0},
					box: [0] },    // y0
			Visual:{
				vtype: xv.AssetType.mesh,
				// shader: xv.ShaderFlag.colorArray,
				shader: xv.XComponent.ShaderFlag.scaleOrb,
				paras: {
					uniforms: { u_texWeight: 0.5},
					features: json.features,
					origin: origin,
					style: {halfWidth: 0.1,
							geoScale: 0.01},

					side: THREE.FrontSide,
					u_tex: ['../../assets/tex/ruler256.png'],
					colors: [[0.4, 0.0, 0.5]],
					//
					orbR: 20,
					whiteAlpha: 0.2,	// out of range alpha
					orbScale: [.5, .5, 1] },
			}
		});
		xworld.startUpdate();
	});

  </script>
</body>
</html>
