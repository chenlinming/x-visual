<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>XTest-Morph</title>
	<script type='text/javascript' src='../../node_modules/three/build/three.min.js'></script>
	<script type='text/javascript' src='../../dist/xv-0.1.0.min.js'></script>
</head>
<body>
  <canvas id='canv'></canvas>
  <script>
	"use strict";

	/**Senario: suppose you have a model to be animated. */
	// initiating xworld
	const xworld = new xv.XWorld(document.getElementById('canv'),
						window, {canvasize: [480, 320]});
	const ecs = xworld.xecs;
	const xscene = xworld.xscene;

	const def1 = {
		id: 'entity1',
		Obj3: {},
		Visual:{vtype: xv.AssetType.mesh,
				asset: 'byr0.png' }
		morphs: [
			{mtype: MorphType.FADEOUT,
			 paras: {}},
			{mtype: MorphType.POINTS,
			 paras: {followBy: 'entity2'}}
		 ] };
	const entities = xworld.addEntities(def1);

	const def2 = {
		id: 'entity2',
		Obj3: {},
		Visual:{vtype: xv.AssetType.mesh,
				asset: 'byr0.png' }
		morphs: [
			{mtype: MorphType.FADEOUT,
			 paras: {}},
			{mtype: MorphType.POINTS,
			 paras: {}}
		 ] };
	entities.push(... xworld.addEntities(def2));

	const morphsys = new xv.Morph(ecs, { xscene });
	xworld.addSystem('test', morphsys);
	xworld.startUpdate();

	morphsys.start('entity1');
  </script>
</body>
</html>
